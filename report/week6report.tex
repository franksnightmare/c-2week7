\documentclass[11pt]{article}

\usepackage{times}
\usepackage[english]{babel}

% -----------------------------------------------
% especially use this for you code
% -----------------------------------------------

\usepackage{courier}
\usepackage{listings}
\usepackage{color}
\usepackage{tabularx}
\usepackage{graphicx}

\definecolor{Gray}{gray}{0.95}

\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\lstset{language=C++,
	basicstyle = \normalsize\ttfamily,   % the size and fonts that are used
	tabsize = 2,                    % sets default tabsize
	breaklines = true,              % sets automatic line breaking
	keywordstyle=\color{blue}\ttfamily,
	stringstyle=\color{red}\ttfamily,
	commentstyle=\color{mygreen}\ttfamily,
	numbers=left,
	keepspaces=true,
	showspaces=false,
	showstringspaces=false,
}

\begin{document}

\title{Programming in C/C++ \\
       Exercises set seven: multi-threading 2
}
\date{\today}
\author{Christiaan Steenkist \\
Jaime Betancor Valado \\
Remco Bos \\
}

\maketitle
\section*{Exercise 47, semaphore design}
We designed a semaphore as shown in the annotations.
This semaphore was upgraded for exercise 49.

\subsection*{Code listings}
\lstinputlisting[caption = main.cc]{src/a47/main.cc}
\lstinputlisting[caption = semaphore.ih]{src/a47/semaphore.ih}
\lstinputlisting[caption = semaphore.h]{src/a47/semaphore.h}
\lstinputlisting[caption = constructor.cc]{src/a47/semaphoreconstr.cc}
\lstinputlisting[caption = notify.cc]{src/a47/notify.cc}
\lstinputlisting[caption = notify\_all.cc]{src/a47/notify_all.cc}
\lstinputlisting[caption = size.cc]{src/a47/size.cc}
\lstinputlisting[caption = wait.cc]{src/a47/wait.cc}

\section*{Exercise 48, async quicksort}
Here is a quicksort algorithm using async threads called quickersort.
Because async always returns something we decided to return the start of the array.

\subsection*{Code listings}
\lstinputlisting[caption = main.ih]{src/a48/main.ih}
\lstinputlisting[caption = main.h]{src/a48/main.h}
\lstinputlisting[caption = main.cc]{src/a48/main.cc}
\lstinputlisting[caption = quickersort.cc]{src/a48/quickersort.cc}

\section*{Exercise 49, async quicksort}
Here is a quicksort algorithm using async threads called quickersort.
Because async always returns something we decided to return the start of the array.

\subsection*{Code listings}
\lstinputlisting[caption = main.ih]{src/a49/main.ih}
\lstinputlisting[caption = main.h]{src/a49/main.h}
\lstinputlisting[caption = main.cc]{src/a49/main.cc}

\subsubsection*{The sorter and the sorting algorithm}
\lstinputlisting[caption = quickersorter.cc]{src/a49/quickersorter.cc}
\lstinputlisting[caption = quickersort.cc]{src/a49/quickersort.cc}

\subsubsection*{Semaphore 2.0, please like and subscribe to our queue}
\lstinputlisting[caption = semaphore.ih]{src/a49/semaphore/semaphore.ih}
\lstinputlisting[caption = semaphore.h]{src/a49/semaphore/semaphore.h}
\lstinputlisting[caption = desubscribethread.cc]{src/a49/semaphore/desubscribethread.cc}
\lstinputlisting[caption = next.cc]{src/a49/semaphore/next.cc}
\lstinputlisting[caption = notify\_all.cc]{src/a49/semaphore/notify_all.cc}
\lstinputlisting[caption = push.cc]{src/a49/semaphore/push.cc}
\lstinputlisting[caption = subscribers.cc]{src/a49/semaphore/subscribers.cc}
\lstinputlisting[caption = subscribethread.cc]{src/a49/semaphore/subscribethread.cc}
\lstinputlisting[caption = wait.cc]{src/a49/semaphore/wait.cc}
\lstinputlisting[caption = waiters.cc]{src/a49/semaphore/waiters.cc}

\section*{Exercise 50, package task design}
We are asked to pack a function that calculates inner products of a matrix multiplication and send it to 24 detached threads.

\subsection*{Code listings}
\lstinputlisting[caption = main.cc]{src/a50/main.cc}


\section*{Exercise 52, std::promise}
This exercise is the same as 50 but using std::promise instead of package task.

\subsection*{Code listings}
\lstinputlisting[caption = main.cc]{src/a52/main.cc}

\end{document}
